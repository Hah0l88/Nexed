import random

def game():
    print("Добро пожаловать в игру 'Тропа Испытаний'!")
    print("Вы — искатель приключений, стремящийся достичь Древа Судьбы. У вас есть ограниченное количество здоровья, чтобы пройти 15 шагов.")

    # Начальные параметры
    hp = 3  # Здоровье игрока
    max_hp = 5  # Максимальное здоровье
    steps = 15  # Всего шагов

    # Сюжеты для каждого шага
    stories = [
        "Вы наткнулись на странный алтарь. Что вы сделаете?",
        "Вы услышали шёпот из тени. Это может быть дух. Что предпримете?",
        "Перед вами глубокий овраг с шатким мостом. Как поступить?",
        "Вы видите заброшенную хижину с открытой дверью. Что вы сделаете?",
        "На пути — непроходимые заросли. Можно попробовать обойти их. Как поступите?",
        "Вы находите старый колодец. Возможно, там есть что-то ценное. Исследовать?",
        "На вашем пути появляется свирепый волк. Попробовать обойти или защититься?",
        "Вы видите мерцающий свет вдали. Это может быть спасение или ловушка. Как поступить?",
        "На пути лежит огромное упавшее дерево. Попробовать перелезть или обойти?",
        "Вы видите огонь в ночи. Возможно, это другие путники. Проверить?",
        "Вы наткнулись на странное сияющее растение. Что сделаете?",
        "На пути — болото. Оно кажется опасным, но коротким маршрутом. Пройти?",
        "Вы слышите грохот воды. Впереди может быть река. Попробовать найти брод?",
        "Перед вами каменная статуя с надписью. Прочитать?",
        "Вы видите яркий луч света, спускающийся с неба. Проверить это место?"
    ]

    # Игра
    for step in range(1, steps + 1):
        print(f"\nШаг {step} из {steps}. Текущее здоровье: {hp}")
        
        # Проверка текущего HP
        if hp <= 0:
            print("Вы потеряли все силы и упаxли на тропе. Лес поглотил вас... Конец игры.")
            return

        # Сюжет для текущего шага
        print(stories[step - 1])

        # Генерация случайных действий
        actions = ["lose_hp", "gain_hp", "nothing"]
        random.shuffle(actions)

        print("Выберите действие:")
        print("1. Первый вариант")
        print("2. Второй вариант")
        print("3. Третий вариант")
        
        choice = input("Введите 1, 2 или 3: ")

        if choice in ["1", "2", "3"]:
            chosen_action = actions[int(choice) - 1]

            if chosen_action == "lose_hp":
                hp -= 1
                print("Вы попали в ловушку или были ранены! Потеря 1 HP.")
            elif chosen_action == "gain_hp":
                if hp < max_hp:
                    hp += 1
                    print("Вы нашли магический источник или лечебные травы! Получено 1 HP.")
                else:
                    print("Вы нашли источник, но ваше здоровье уже на максимуме.")
            elif chosen_action == "nothing":
                print("Вы решили просто продолжать путь. Ничего не произошло.")
        else:
            print("Неверный выбор. Вы пропустили ход.")

    # Проверка завершения пути
    if hp > 0:
        print("\nПоздравляем! Вы добрались до Древа Судьбы с достаточным количеством сил. Оно исполняет ваше желание!")
    else:
        print("Вы добрались до конца, но у вас не осталось сил. Лес поглотил вас...")

# Запуск игры
if __name__ == "__main__":
    game()
